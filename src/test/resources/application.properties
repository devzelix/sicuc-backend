# ===================================================================
# == TESTING ENVIRONMENT CONFIGURATION
# ===================================================================

# --- H2 In-Memory Database Setup ---
# All tests will run against this dedicated in-memory H2 instance.
# This ensures that test data is clean and isolated for every test run.
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password


# --- JPA / Hibernate Configuration for Testing ---
# DDL-Auto: 'create-drop' forces Hibernate to create the schema (tables)
# before running each test and drop them afterwards. This is CRITICAL for test isolation.
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true

# Disables Open Session In View. Generally recommended for REST APIs 
# to improve performance and prevent lazy-loading issues in controllers.
spring.jpa.open-in-view=false


# --- Flyway Management ---
# Flyway must be disabled during testing so it doesn't conflict with
# Hibernate's automatic schema generation (ddl-auto=create-drop).
spring.flyway.enabled=false


# ===================================================================
# == SECURITY (JWT) DUMMY VALUES
# ===================================================================
# These values are fake but are required for the Application Context 
# (specifically the JwtService) to load successfully during testing.
application.security.jwt.secret-key=xWey5IjnYkdI3C9DWeHDesTXwr0srNCH9zh1WBkGiR1CaZTA2PXoYQp31Svee2m4FHhfy5sHHPVKn3n0Eqa2Gw
application.security.jwt.access-token.expiration=86400000
application.security.jwt.refresh-token.expiration=604800000


# ===================================================================
# == LOGGING OPTIMIZATION (Silencing Noise)
# ===================================================================
# Silences common Spring Security warnings during testing.
logging.level.org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer=error

# Reduces noise from common Spring internals.
logging.level.org.springframework.boot.autoconfigure=warn
logging.level.org.hibernate.SQL=off
logging.level.root=info